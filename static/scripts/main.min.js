var initApp=function(){if(!("modules"in app&&"globalWrapper"in app.modules)){var e=function(){var e=this;e.html=document.querySelector("html"),e.body=document.querySelector("body"),e.container=document.querySelector(".globalWrapper"),e.main=document.querySelector(".main"),e.mainHeight=e.main.offsetHeight,e.aside=document.querySelector(".aside"),e.asideBottomLimit=parseInt(e.aside.getBoundingClientRect().bottom+window.pageYOffset),e.asideHidden=!1,e.modules=app.modules,e.setupListener=function(){window.addEventListener("scroll",e.scrollHandle),e.main.addEventListener("transitionend",e.handlePosition)},e.handlePosition=function(t){if("width"===t.propertyName){var n=e.main.offsetHeight,o=0;e.asideHidden?(o=e.mainHeight-n,e.main.style.marginTop=o+"px",window.scrollBy(0,o/2)):(o=parseInt(e.main.style.marginTop),e.main.style.marginTop="0px",window.scrollBy(0,o*-1))}},e.scrollHandle=function(){var t=window.pageYOffset;e.asideHidden=t>e.asideBottomLimit,e.asideHidden?e.hideAside():e.showAside()},e.hideAside=function(){e.container.classList.contains("globalWrapper_aside_hidden")||e.container.classList.add("globalWrapper_aside_hidden")},e.showAside=function(){e.container.classList.contains("globalWrapper_aside_hidden")&&e.container.classList.remove("globalWrapper_aside_hidden")},e.initModules=function(){for(var t in e.modules)e.modules.hasOwnProperty(t)&&"undefined"!=typeof e.modules[t].init&&"globalWrapper"!==t&&e.modules[t].init()},e.init=function(){e.initModules(),e.setupListener()}};"modules"in app||(app.modules={}),app.modules.globalWrapper=new e,app.modules.globalWrapper.init()}};window.addEventListener("load",initApp),function(){if(!("modules"in app&&"modal"in app.modules)){var e=function(){var e=this;e.html="",e.body="",e.container=document.querySelector(".modal"),e.openButton=document.querySelector(".modal_trigger"),e.closeButton=document.querySelector(".modal_close"),e.setupListener=function(){e.openButton.addEventListener("click",e.open),e.closeButton.addEventListener("click",e.close)},e.open=function(t){t.preventDefault();var n=this,o=n.getAttribute("href"),i=document.querySelector(o);e.html.classList.add("modal_state_open"),i.classList.add("modal_state_open")},e.close=function(t){t.preventDefault();var n=this,o=n.closest(".modal");o.classList.remove("modal_state_open"),e.html.classList.remove("modal_state_open")},e.importDefaults=function(){e.html=app.modules.globalWrapper.html,e.body=app.modules.globalWrapper.body},e.init=function(){e.container&&(e.importDefaults(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.modal=new e}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdsb2JhbFdyYXBwZXIvZ2xvYmFsV3JhcHBlci5qcyIsIm1vZGFsL21vZGFsLmpzIl0sIm5hbWVzIjpbImluaXRBcHAiLCJhcHAiLCJtb2R1bGVzIiwiR2xvYmFsV3JhcHBlciIsInNlbGYiLCJ0aGlzIiwiaHRtbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJvZHkiLCJjb250YWluZXIiLCJtYWluIiwibWFpbkhlaWdodCIsIm9mZnNldEhlaWdodCIsImFzaWRlIiwiYXNpZGVCb3R0b21MaW1pdCIsInBhcnNlSW50IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYm90dG9tIiwid2luZG93IiwicGFnZVlPZmZzZXQiLCJhc2lkZUhpZGRlbiIsInNldHVwTGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwic2Nyb2xsSGFuZGxlIiwiaGFuZGxlUG9zaXRpb24iLCJldmVudCIsInByb3BlcnR5TmFtZSIsImhlaWdodCIsIm9mZnNldCIsInN0eWxlIiwibWFyZ2luVG9wIiwic2Nyb2xsQnkiLCJzY3JvbGxUb3AiLCJoaWRlQXNpZGUiLCJzaG93QXNpZGUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFkZCIsInJlbW92ZSIsImluaXRNb2R1bGVzIiwibW9kdWxlIiwiaGFzT3duUHJvcGVydHkiLCJpbml0IiwiZ2xvYmFsV3JhcHBlciIsIk1vZGFsIiwib3BlbkJ1dHRvbiIsImNsb3NlQnV0dG9uIiwib3BlbiIsImNsb3NlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJzcmMiLCJnZXRBdHRyaWJ1dGUiLCJjbG9zZXN0IiwiaW1wb3J0RGVmYXVsdHMiLCJtb2RhbCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsU0FBQSxXQUNBLEtBQUEsV0FBQUMsTUFBQSxpQkFBQUEsS0FBQUMsU0FBQSxDQVFBLEdBQUFDLEdBQUEsV0FDQSxHQUFBQyxHQUFBQyxJQUVBRCxHQUFBRSxLQUFBQyxTQUFBQyxjQUFBLFFBQ0FKLEVBQUFLLEtBQUFGLFNBQUFDLGNB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LEVBQUFtRCxlQUFBLFdBQ0FuRCxFQUFBRSxLQUFBTCxJQUFBQyxRQUFBMEMsY0FBQXRDLEtBQ0FGLEVBQUFLLEtBQUFSLElBQUFDLFFBQUEwQyxjQUFBbkMsTUFNQUwsRUFBQXVDLEtBQUEsV0FDQXZDLEVBQUFNLFlBRUFOLEVBQUFtRCxpQkFDQW5ELEVBQUFrQixrQkFNQSxZQUFBckIsT0FDQUEsSUFBQUMsWUFHQUQsSUFBQUMsUUFBQXNELE1BQUEsR0FBQVgiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaW5pdEFwcCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICgnbW9kdWxlcycgaW4gYXBwICYmICdnbG9iYWxXcmFwcGVyJyBpbiBhcHAubW9kdWxlcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBHbG9iYWxXcmFwcGVyIGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIHZhciBHbG9iYWxXcmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5odG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpO1xuICAgICAgICBzZWxmLmJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICAgICAgIHNlbGYuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdsb2JhbFdyYXBwZXInKTtcbiAgICAgICAgc2VsZi5tYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4nKTtcbiAgICAgICAgc2VsZi5tYWluSGVpZ2h0ID0gc2VsZi5tYWluLm9mZnNldEhlaWdodDtcbiAgICAgICAgc2VsZi5hc2lkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hc2lkZScpO1xuICAgICAgICBzZWxmLmFzaWRlQm90dG9tTGltaXQgPSBwYXJzZUludChzZWxmLmFzaWRlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSArIHdpbmRvdy5wYWdlWU9mZnNldCk7XG4gICAgICAgIHNlbGYuYXNpZGVIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgc2VsZi5tb2R1bGVzID0gYXBwLm1vZHVsZXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNlbGYuc2Nyb2xsSGFuZGxlKTtcbiAgICAgICAgICAgIHNlbGYubWFpbi5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgc2VsZi5oYW5kbGVQb3NpdGlvbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXAgZm9jdXMgYWZ0ZXIgYXNpZGUgaGFzIGJlbiBjbG9zZWRcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmhhbmRsZVBvc2l0aW9uID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5wcm9wZXJ0eU5hbWUgPT09ICd3aWR0aCcpIHtcblxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBzZWxmLm1haW4ub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuYXNpZGVIaWRkZW4pIHtcblxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBzZWxmLm1haW5IZWlnaHQgLSBoZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5tYWluLnN0eWxlLm1hcmdpblRvcCA9IG9mZnNldCArICdweCc7XG5cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbEJ5KDAsIG9mZnNldCAvIDIpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBwYXJzZUludChzZWxmLm1haW4uc3R5bGUubWFyZ2luVG9wKTtcblxuICAgICAgICAgICAgICAgICAgICBzZWxmLm1haW4uc3R5bGUubWFyZ2luVG9wID0gJzBweCc7XG5cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbEJ5KDAsIG9mZnNldCAqICgtMSkpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZSBzY3JvbGwgZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuc2Nyb2xsSGFuZGxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuXG4gICAgICAgICAgICBzZWxmLmFzaWRlSGlkZGVuID0gc2Nyb2xsVG9wID4gc2VsZi5hc2lkZUJvdHRvbUxpbWl0O1xuXG4gICAgICAgICAgICBpZiAoc2VsZi5hc2lkZUhpZGRlbikge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5oaWRlQXNpZGUoKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuc2hvd0FzaWRlKCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSGlkZSBhc2lkZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5oaWRlQXNpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghc2VsZi5jb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdnbG9iYWxXcmFwcGVyX2FzaWRlX2hpZGRlbicpKSB7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdnbG9iYWxXcmFwcGVyX2FzaWRlX2hpZGRlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaG93IGFzaWRlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnNob3dBc2lkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnZ2xvYmFsV3JhcHBlcl9hc2lkZV9oaWRkZW4nKSkge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnZ2xvYmFsV3JhcHBlcl9hc2lkZV9oaWRkZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdCBhbGwgbW9kdWxlcyBpbiBhcHAubW9kdWxlc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbml0TW9kdWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgbW9kdWxlIGluIHNlbGYubW9kdWxlcykge1xuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYubW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShtb2R1bGUpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxmLm1vZHVsZXNbbW9kdWxlXS5pbml0ICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUgIT09ICdnbG9iYWxXcmFwcGVyJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1vZHVsZXNbbW9kdWxlXS5pbml0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuaW5pdE1vZHVsZXMoKTtcbiAgICAgICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lcigpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBpZiAoISgnbW9kdWxlcycgaW4gYXBwKSkge1xuICAgICAgICBhcHAubW9kdWxlcyA9IHt9O1xuICAgIH1cblxuICAgIGFwcC5tb2R1bGVzLmdsb2JhbFdyYXBwZXIgPSBuZXcgR2xvYmFsV3JhcHBlcigpO1xuXG4gICAgYXBwLm1vZHVsZXMuZ2xvYmFsV3JhcHBlci5pbml0KCk7XG59O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGluaXRBcHApO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJ21vZHVsZXMnIGluIGFwcCAmJiAnbW9kYWwnIGluIGFwcC5tb2R1bGVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE1vZGFsIGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIHZhciBNb2RhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuaHRtbCA9ICcnO1xuICAgICAgICBzZWxmLmJvZHkgPSAnJztcbiAgICAgICAgc2VsZi5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKTtcbiAgICAgICAgc2VsZi5vcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX3RyaWdnZXInKTtcbiAgICAgICAgc2VsZi5jbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9jbG9zZScpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYub3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGYub3Blbik7XG4gICAgICAgICAgICBzZWxmLmNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VsZi5jbG9zZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5vcGVuID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLFxuICAgICAgICAgICAgICAgIHNyYyA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSxcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNyYyk7XG5cbiAgICAgICAgICAgIHNlbGYuaHRtbC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9zdGF0ZV9vcGVuJyk7XG4gICAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbW9kYWxfc3RhdGVfb3BlbicpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuY2xvc2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gdGFyZ2V0LmNsb3Nlc3QoJy5tb2RhbCcpO1xuXG4gICAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfc3RhdGVfb3BlbicpO1xuICAgICAgICAgICAgc2VsZi5odG1sLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX3N0YXRlX29wZW4nKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW1wb3J0IHByb3BlcnRpZXMgZnJvbSBNYWluIGNsYXNzXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmltcG9ydERlZmF1bHRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmh0bWwgPSBhcHAubW9kdWxlcy5nbG9iYWxXcmFwcGVyLmh0bWw7XG4gICAgICAgICAgICBzZWxmLmJvZHkgPSBhcHAubW9kdWxlcy5nbG9iYWxXcmFwcGVyLmJvZHk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbnRhaW5lcikge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5pbXBvcnREZWZhdWx0cygpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lcigpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGlmICghKCdtb2R1bGVzJyBpbiBhcHApKSB7XG4gICAgICAgIGFwcC5tb2R1bGVzID0ge307XG4gICAgfVxuXG4gICAgYXBwLm1vZHVsZXMubW9kYWwgPSBuZXcgTW9kYWwoKTtcbn0pKCk7XG4iXX0=
